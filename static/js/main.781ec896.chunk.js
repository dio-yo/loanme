(this.webpackJsonploanme=this.webpackJsonploanme||[]).push([[0],{113:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),o=t(10),r=t.n(o),c=(t(90),t(11)),i=t(162),m={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var a,t,n,l,o,r,c,i="",u=0;for(e=m._utf8_encode(e);u<e.length;)l=(a=e.charCodeAt(u++))>>2,o=(3&a)<<4|(t=e.charCodeAt(u++))>>4,r=(15&t)<<2|(n=e.charCodeAt(u++))>>6,c=63&n,isNaN(t)?r=c=64:isNaN(n)&&(c=64),i=i+m._keyStr.charAt(l)+m._keyStr.charAt(o)+m._keyStr.charAt(r)+m._keyStr.charAt(c);return i},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var a="",t=0;t<e.length;t++){var n=e.charCodeAt(t);n<128?a+=String.fromCharCode(n):n>127&&n<2048?(a+=String.fromCharCode(n>>6|192),a+=String.fromCharCode(63&n|128)):(a+=String.fromCharCode(n>>12|224),a+=String.fromCharCode(n>>6&63|128),a+=String.fromCharCode(63&n|128))}return a}},u="https://jsonbox.io/box_fea2aadc991c020ae53d",s=t(149);t(35);var d=function(e){var a=Object(n.useState)(null),t=Object(c.a)(a,2),o=t[0],r=t[1],u=Object(n.useState)(""),d=Object(c.a)(u,2),g=d[0],p=d[1];return l.a.createElement("div",{className:"login-container"},l.a.createElement(i.a,{error:!!o,label:"Enter password",onChange:function(e){p(e.target.value)},value:g,helperText:o||null}),l.a.createElement(s.a,{className:"login-btn",variant:"outlined",color:"primary",onClick:function(){g&&(function(e){var a=m.encode(e);return console.log("encodedVal",a),"Nzc4NzE="===a}(g)?e.handleSuccess():r("Wrong Password"))}},"Log In"))},g=t(69),p=t(150),b=t(160),E=t(164),f=t(161),h=t(157),v=t(14),N=t(152),w=t(156),C=t(165),j=t(166),S=t(17),O=t.n(S),k=t(155),y=t(151),_=t(153),x=t(48),A=t.n(x),B=t(154),T=t(115),L=Object(p.a)((function(e){return{btnGrp:{display:"flex"},updateBtn:{marginTop:15,marginRight:15},rowing:{marginTop:20},textField:{marginTop:-5,marginLeft:5},table:{minWidth:650},addBtn:{marginBottom:20},modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));var R=function(e){var a=L(),t=l.a.useState(!1),n=Object(c.a)(t,2),o=n[0],r=n[1],m=l.a.useState(null),d=Object(c.a)(m,2),g=d[0],p=d[1],b=l.a.useState(0),E=Object(c.a)(b,2),f=E[0],h=E[1],S=l.a.useState(!1),x=Object(c.a)(S,2),R=x[0],F=x[1],P=l.a.useState({name:null,amount:null,months:null,percentage:null}),D=Object(c.a)(P,2),I=D[0],U=D[1],G=function(){r(!0)},W=function(){p(null),r(!1),F(!1),U({name:null,amount:null,months:null,percentage:null})};return l.a.createElement("div",null,l.a.createElement(s.a,{onClick:function(){F(!0),G()},className:a.addBtn,variant:"contained"},"Grant a loan"),e.loans.length>0&&l.a.createElement(y.a,{component:T.a},l.a.createElement(N.a,{className:a.table,"aria-label":"simple table"},l.a.createElement(_.a,null,l.a.createElement(B.a,null,l.a.createElement(k.a,null,"Name"),l.a.createElement(k.a,{align:"right"},"Amount"),l.a.createElement(k.a,{align:"right"},"Loan Taken on"),l.a.createElement(k.a,{align:"right"},"Interest"),l.a.createElement(k.a,{align:"right"},"Months"),l.a.createElement(k.a,{align:"right"},"Actions"))),l.a.createElement(w.a,null,e.loans.map((function(a){return l.a.createElement(B.a,{key:a.id},l.a.createElement(k.a,{component:"th",scope:"row"},a.name),l.a.createElement(k.a,{align:"right"},"Rs ",a.amount),l.a.createElement(k.a,{align:"right"},a.loanDate),l.a.createElement(k.a,{align:"right"},a.percentage,"%"),l.a.createElement(k.a,{align:"right"},a.months),l.a.createElement(k.a,{align:"right"},l.a.createElement(A.a,{className:"icon",onClick:function(){return function(a){var t=e.loans.find((function(e){if(e._id===a)return e}));p(t),G()}(a._id)}})))}))))),l.a.createElement(C.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:a.modal,open:o,onClose:W,closeAfterTransition:!0,BackdropComponent:j.a,BackdropProps:{timeout:500}},l.a.createElement("div",{className:a.paper},!!g&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:a.rowing},l.a.createElement("b",null,"Name: "),l.a.createElement("span",null," ",g.name)),l.a.createElement("div",{className:a.rowing},l.a.createElement("b",null,"Loan taken on: "),l.a.createElement("span",null," ",g.loanDate)),l.a.createElement("div",{className:a.rowing},l.a.createElement("b",null,"Loan Amount: "),l.a.createElement("span",null,"Rs ",g.amount),l.a.createElement("div",{className:a.rowing},l.a.createElement("b",null,"Interest: "),l.a.createElement("span",null,g.percentage," %"))),l.a.createElement("div",{className:a.rowing},l.a.createElement("span",null,l.a.createElement("b",null,"Amount Paid back:")," Rs "),l.a.createElement(i.a,{className:a.textField,type:"number",onChange:function(e){h(e.target.value)},value:f})),l.a.createElement(s.a,{disabled:f<=g.amount,onClick:function(){Object(v.a)({},g).amountPaidBack=f;var a=Object(v.a)({},e.totals);a.interest_earned=Number(a.interest_earned)+Number(f)-Number(g.amount),e.updateTotals(a),O.a.delete("".concat(u,"/users/").concat(g._id)).then((function(a){e.populateLoans()})).catch((function(e){console.log(e),alert("Something went wrong")})),W()},color:"primary",className:a.updateBtn,variant:"contained"},"Loan Paid back")),R&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",null,l.a.createElement(i.a,{label:"Name",className:a.rowing,onChange:function(e){var a=Object(v.a)({},I);a.name=e.target.value,U(a)},value:I.name})),l.a.createElement(i.a,{label:"Amount",className:a.rowing,type:"number",onChange:function(e){var a=Object(v.a)({},I);a.amount=e.target.value,U(a)},value:I.amount}),l.a.createElement("div",null,l.a.createElement(i.a,{label:"Duration (in months)",className:a.rowing,type:"number",onChange:function(e){var a=Object(v.a)({},I);a.months=e.target.value,U(a)},value:I.months})),l.a.createElement(i.a,{label:"Interest Percentage",className:a.rowing,type:"number",onChange:function(e){var a=Object(v.a)({},I);a.percentage=e.target.value,U(a)},value:I.percentage}),l.a.createElement("div",null,l.a.createElement(s.a,{onClick:function(){var a=Object(v.a)({},I),t=new Date;a.loanDate="".concat(t.getDate(),"-").concat(t.getMonth(),"-").concat(t.getFullYear()),a.amountPaidBack=0;var n=Object(v.a)({},e.totals);n.loan=Number(n.loan)+Number(a.amount),e.updateTotals(n),O.a.post("".concat(u,"/loans"),a).then((function(a){e.populateLoans()})).catch((function(e){console.log(e),alert("Something went wrong")})),W()},color:"default",disabled:!I.percentage||!I.months||!I.amount||!I.name,className:a.updateBtn,variant:"contained"},"Grant Loan"))))))},F=t(163),P=Object(p.a)((function(e){return{btnGrp:{display:"flex"},updateBtn:{marginTop:15,marginRight:15},rowing:{marginTop:20},textField:{marginTop:-5,marginLeft:5},table:{minWidth:650},addBtn:{marginBottom:20},modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));var D=function(e){var a=P(),t=l.a.useState(!1),n=Object(c.a)(t,2),o=n[0],r=n[1],m=l.a.useState(null),d=Object(c.a)(m,2),g=d[0],p=d[1],b=l.a.useState(null),E=Object(c.a)(b,2),f=E[0],h=E[1],S=l.a.useState(!1),x=Object(c.a)(S,2),L=x[0],R=x[1],F=l.a.useState({name:null,amount:null}),D=Object(c.a)(F,2),I=D[0],U=D[1],G=function(){r(!0)},W=function(){p(null),r(!1),R(!1),U({name:null,amount:null})};return l.a.createElement("div",null,l.a.createElement(s.a,{onClick:function(){R(!0),G()},className:a.addBtn,variant:"contained"},"Add user"),e.users.length>0&&l.a.createElement(y.a,{component:T.a},l.a.createElement(N.a,{className:a.table,"aria-label":"simple table"},l.a.createElement(_.a,null,l.a.createElement(B.a,null,l.a.createElement(k.a,null,"Name"),l.a.createElement(k.a,{align:"right"},"Amount"),l.a.createElement(k.a,{align:"right"},"Actions"))),l.a.createElement(w.a,null,e.users.map((function(a){return l.a.createElement(B.a,{key:a.id},l.a.createElement(k.a,{component:"th",scope:"row"},a.name),l.a.createElement(k.a,{align:"right"},"Rs ",a.amount),l.a.createElement(k.a,{align:"right"},l.a.createElement(A.a,{className:"icon",onClick:function(){return function(a){var t=e.users.find((function(e){if(e._id===a)return e}));p(t),h(t.amount),G()}(a._id)}})))}))))),l.a.createElement(C.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:a.modal,open:o,onClose:W,closeAfterTransition:!0,BackdropComponent:j.a,BackdropProps:{timeout:500}},l.a.createElement("div",{className:a.paper},!!g&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:a.rowing},l.a.createElement("b",null,"Name: "),l.a.createElement("span",null," ",g.name)),l.a.createElement("div",{className:a.rowing},l.a.createElement("b",null,"Amount: "),l.a.createElement("span",null," Rs",l.a.createElement(i.a,{className:a.textField,type:"number",onChange:function(e){h(e.target.value)},value:f}))),l.a.createElement("div",{className:a.btnGrp},l.a.createElement(s.a,{onClick:function(){var a={name:g.name,amount:f},t=Object(v.a)({},e.totals);t.total_deposit=Number(t.total_deposit)+Number(f)-Number(g.amount),e.updateTotals(t),O.a.put("".concat(u,"/users/").concat(g._id),a).then((function(a){e.populateUsers()})).catch((function(e){console.log(e),alert("Something went wrong")})),W()},color:"primary",disabled:g.amount===f,className:a.updateBtn,variant:"contained"},"Update"),l.a.createElement(s.a,{onClick:function(){var a=Object(v.a)({},e.totals);a.total_deposit=Number(a.total_deposit)-Number(g.amount),e.updateTotals(a),O.a.delete("".concat(u,"/users/").concat(g._id)).then((function(a){e.populateUsers()})).catch((function(e){console.log(e),alert("Something went wrong")})),W()},color:"secondary",className:a.updateBtn,variant:"contained"},"Delete User"))),L&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",null,l.a.createElement(i.a,{label:"Name",className:a.rowing,onChange:function(e){var a=Object(v.a)({},I);a.name=e.target.value,U(a)},value:I.name})),l.a.createElement(i.a,{label:"Amount",className:a.rowing,type:"number",onChange:function(e){var a=Object(v.a)({},I);a.amount=e.target.value,U(a)},value:I.amount}),l.a.createElement("div",null,l.a.createElement(s.a,{onClick:function(){var a=Object(v.a)({},e.totals);a.total_deposit=Number(a.total_deposit)+Number(I.amount),e.updateTotals(a),O.a.post("".concat(u,"/users"),I).then((function(a){e.populateUsers()})).catch((function(e){console.log(e),alert("Something went wrong")})),W()},color:"default",className:a.updateBtn,variant:"contained"},"Add User"))))))},I=t(158),U=t(159);function G(e){var a=e.children,t=e.value,n=e.index,o=Object(g.a)(e,["children","value","index"]);return l.a.createElement("div",Object.assign({role:"tabpanel",hidden:t!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},o),t===n&&l.a.createElement(F.a,{p:3},l.a.createElement(h.a,null,a)))}var W=function(){var e=l.a.useState(0),a=Object(c.a)(e,2),t=a[0],o=a[1],r=l.a.useState([]),i=Object(c.a)(r,2),m=i[0],s=i[1],d=l.a.useState([]),g=Object(c.a)(d,2),h=g[0],v=g[1],N=l.a.useState({total_deposit:0,loan:0,interest_earned:0}),w=Object(c.a)(N,2),C=w[0],j=w[1],S=Object(p.a)((function(e){return{info:{display:"flex",justifyContent:"space-around"},root:{flexGrow:1,backgroundColor:e.palette.background.paper}}}))(),k=function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}},y=function(){O.a.get("".concat(u,"/users")).then((function(e){s(e.data)})).catch((function(e){console.log(e),alert("Something went wrong")}))},_=function(){O.a.get("".concat(u,"/loans")).then((function(e){v(e.data)})).catch((function(e){console.log(e),alert("Something went wrong")}))},x=function(){O.a.get("".concat(u,"/totals")).then((function(e){e.data.length>0?j(e.data[0]):A(C)})).catch((function(e){console.log(e),alert("Something went wrong")}))},A=function(e){O.a.post("".concat(u,"/totals"),e).then((function(e){x()})).catch((function(e){console.log(e),alert("Something went wrong")}))};return Object(n.useEffect)((function(){x(),y(),_()}),[]),l.a.createElement("div",{className:"HomePage"},l.a.createElement(I.a,null),l.a.createElement(U.a,{maxWidth:"65%"},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:S.root},l.a.createElement("div",{className:S.info},l.a.createElement("span",null,l.a.createElement("b",null,"Total Deposit:")," Rs ",C.total_deposit),l.a.createElement("span",null,l.a.createElement("b",null,"Total Money lended:")," Rs ",C.loan),l.a.createElement("span",null,l.a.createElement("b",null,"Total Interest Earned:")," Rs ",C.interest_earned),l.a.createElement("span",null,l.a.createElement("b",null,"Total Money"),l.a.createElement("i",null,"(deposit + interest)"),": Rs ",Number(C.interest_earned)+Number(C.total_deposit))),l.a.createElement(b.a,{color:"transparent",position:"static"},l.a.createElement(E.a,{value:t,onChange:function(e,a){o(a)},"aria-label":"simple tabs example"},l.a.createElement(f.a,Object.assign({label:"Users"},k(0))),l.a.createElement(f.a,Object.assign({label:"Loan"},k(1))))),l.a.createElement(G,{value:t,index:0},l.a.createElement(D,{updateTotals:A,totals:C,populateUsers:y,users:m})),l.a.createElement(G,{value:t,index:1},l.a.createElement(R,{updateTotals:A,totals:C,populateLoans:_,loans:h}))))))};var M=function(){var e=Object(n.useState)(!1),a=Object(c.a)(e,2),t=a[0],o=a[1];return l.a.createElement("div",{className:"App"},t?l.a.createElement(W,null):l.a.createElement(d,{handleSuccess:function(){return o(!0)}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},35:function(e,a,t){},85:function(e,a,t){e.exports=t(113)},90:function(e,a,t){}},[[85,1,2]]]);
//# sourceMappingURL=main.781ec896.chunk.js.map